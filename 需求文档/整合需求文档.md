# ACFUN直播工具箱整合需求文档（字节跳动标准）

## 一、项目概述
ACFUN直播工具箱是一款基于Electron开发的跨平台直播辅助工具，支持Windows、macOS和Linux系统。工具采用"应用主程序+小程序"架构，主程序提供稳定可靠的核心直播管理功能，小程序系统提供丰富多样的扩展能力，为ACFUN直播平台的主播提供高效、灵活的直播辅助解决方案。

### 1.1 产品定位
- **目标用户**：ACFUN平台主播（个人主播、机构主播、签约主播）
- **核心价值**：简化直播流程、增强观众互动、提供数据洞察、支持功能扩展
- **产品形态**：桌面应用程序（Electron）+小程序生态
- **技术架构**：分层架构设计，主进程+渲染进程+小程序沙箱环境

### 1.2 核心优势
- **开源免费**：降低主播使用门槛，支持社区贡献
- **跨平台支持**：覆盖主流操作系统，满足不同主播的设备需求
- **模块化设计**：核心功能稳定可靠，扩展功能灵活可选
- **性能优化**：针对直播场景优化资源占用，确保直播流畅性
- **安全可控**：完善的权限管理机制，保障直播内容安全

### 1.3 后端技术架构

#### 1.3.1 总体架构
ACFUN直播工具箱后端采用分层架构设计，基于Electron框架实现跨平台支持,采用模块化设计理念,将核心功能与扩展能力分离。

- **核心层**:包含应用基础模块、配置管理、日志系统等基础设施
- **服务层**:实现弹幕处理、推流管理、小程序系统等核心业务功能
- **API层**:提供统一的接口供渲染进程和小程序调用
- **通信层**:处理进程间通信、网络请求和实时数据流

#### 1.3.2 技术栈
- 基础框架:Electron
- 语言:TypeScript
- 服务器:Express
- 进程通信:IPC、WebSocket、EventSource
- 数据存储:本地文件系统、electron-data

### 1.3.3 核心模块设计

#### 应用生命周期管理

#####模块系统
应用模块接口定义了标准化的模块启用方法，所有模块需实现enable接口以接收上下文信息并完成初始化。

- ModuleRunner负责初始化和管理所有应用模块

#####初始化流程
应用初始化流程通过模块运行器依次加载核心功能模块，包括单实例控制、窗口生命周期管理、硬件加速配置、自动更新和弹幕系统等，确保各组件按序完成初始化。

#### 弹幕系统模块
- 采用子进程模式运行,确保弹幕处理不影响主进程稳定性
- 支持WebSocket和TCP两种连接模式,提高连接可靠性
- 提供完整的配置管理和日志收集机制
- 实现弹幕流接收、存储、分发。支持同时接收/分发多个直播间弹幕流。

核心实现代码示例:
弹幕系统模块包含存储和分发逻辑：存储逻辑将全量弹幕保存到sqlite数据库中，支持增量更新。分发逻辑根据收到的直播间ID将弹幕分发给对应的小程序。设置超时机制，如果弹幕对应的直播间ID不属于登陆者本人，则在一段时间没有小程序请求该直播间弹幕之后关闭对应直播间ID弹幕流

**核心API接口:**
- `GET /api/danmu/connect`: 建立弹幕连接
- `GET /api/danmu/disconnect`: 断开弹幕连接
- `GET /api/events/danmu`: 获取实时弹幕流(SSE)
- `GET /api/danmu/history`: 获取历史弹幕
- `GET /api/danmu/config`: 获取弹幕配置
- `POST /api/danmu/config`: 更新弹幕配置

**对应需求:**
- 性能需求: 弹幕处理能力≥1000条/秒
- 功能验收: 弹幕显示准确率≥99%,过滤规则生效时间≤1秒

#### 窗口管理
- 基于Electron BrowserWindow实现
- 用于管理支持窗口打开的小程序窗口
- 支持多窗口管理和窗口间通信
- 延迟初始化机制确保IPC事件处理器已注册
- 窗口创建和配置分离,通过WindowOptions接口实现灵活配置
- 支持窗口状态持久化(位置、大小、最大化状态)

#### 小程序管理
- 实现应用生命周期管理
- 支持模块化加载和卸载
- 提供小程序配置持久化存储

小程序管理器采用事件驱动架构，通过扫描指定目录加载小程序配置，维护小程序注册表和窗口映射关系，提供小程序生命周期管理和跨进程通信能力。

### 1.3.4 通信机制

#### 进程间通信
- 使用Electron的ipcMain和ipcRenderer实现主进程与渲染进程通信
- 定义标准化的API接口,支持异步调用和错误处理

进程间通信API采用Electron的ipcMain机制实现，提供弹幕模块启停等核心功能的跨进程调用接口，包含错误处理和状态返回机制。

#### 实时数据流
- 使用EventSource实现单向实时数据流(如弹幕流)
- 支持心跳机制和断线重连策略
- 基于HTTP长连接,减少资源消耗

HTTP服务器模块实现了基于EventSource的服务器推送功能，通过建立持久连接向客户端推送实时事件数据流，包含连接管理、事件发布和资源清理机制。

### 1.3.5 存储系统设计

#### 配置管理
- 基于electron-data实现跨平台配置存储
- 支持配置文件备份和恢复
- 配置变更实时生效机制
配置管理器基于electron-data实现跨平台配置存储，支持自定义路径、自动保存和格式化存储，提供配置目录创建、初始化和错误处理功能。

####数据管理
- 单例模式实现的数据管理器
- 支持应用数据的CRUD操作
- 数据变更通知机制

数据管理器采用单例模式设计，提供键值对数据存储和变更通知机制，支持数据监听和事件驱动的数据更新，确保应用状态一致性。

#### 日志系统
- 基于EventEmitter实现的日志管理器
- 支持多来源日志分类管理
- 文件日志(按日期轮转)和内存日志(限制1000条)双存储机制
- 日志级别控制(info/debug/error/warn)

日志管理器基于事件驱动架构，实现多来源日志分类管理，采用文件日志（按日期轮转）和内存日志（限制1000条）双存储机制，支持日志级别控制和日志添加事件通知。

### 1.3.6 HTTP服务器与API设计

#### 服务器架构
- 基于Express实现的轻量级HTTP服务器
- 支持静态资源托管和API路由
- 动态路由注册机制,支持模块化扩展

HTTP服务器管理模块基于Express框架构建轻量级服务器，支持静态资源托管和API路由，实现动态路由注册机制和模块化扩展，提供服务器初始化和端口配置功能。

#### API设计原则
- RESTful API设计风格
-统一的响应格式({success: boolean, data?: any, error?: string})
-完善的错误处理
-权限验证机制

### 1.3.7 性能优化策略

#### 资源管理
- 子进程隔离CPU密集型任务(弹幕处理≥1000条/秒)
- 延迟加载非核心模块(首屏加载≤3个核心模块)
- 资源使用限制(单小程序内存≤100MB,CPU占用≤5%)
- 实现代码:
性能优化采用子进程隔离机制处理CPU密集型任务，如弹幕处理（≥1000条/秒），通过设置5MB缓冲区限制和独立进程资源，避免影响主进程稳定性。

#### 网络优化
- 请求合并减少网络往返(批量API请求合并≤100ms延迟)
- 数据缓存策略(内存缓存TTL=5分钟,磁盘缓存TTL=24小时)
- 长连接复用(WebSocket连接池大小=5,EventSource复用率≥90%)

#### 渲染优化
- 虚拟列表处理大数据渲染(弹幕列表可视区域渲染≤50条)
- 图片懒加载和压缩(WebP格式,质量70%,预加载视口内图片)
- 避免不必要的重绘(使用CSS containment,减少DOM操作)
- 避免不必要的UI更新

### 1.3.8 安全性设计

- 主进程与渲染进程严格隔离
- 小程序运行在独立沙箱中
- 敏感数据加密存储
- 直播码定期刷新
- IPC通信权限验证

### 1.3.9 小程序设计

#### 1.3.9.1 模块系统
- 标准化的AppModule接口
- 动态模块加载机制
- 模块依赖管理

#### 1.3.9.2 小程序架构
- 小程序运行时环境
- 标准化通信接口
- 资源限制和安全沙箱

#### 1.3.9.3 小程序系统
- **插件注册机制**: 基于manifest.json声明式注册，支持静态和动态注册
小程序系统采用声明式注册机制，通过manifest.json定义插件元数据和钩子函数，支持静态和动态注册，实现小程序启动/关闭、直播开始/结束等关键节点的功能扩展。
- **钩子函数扩展点**: 主程序启动/关闭、直播开始/结束、弹幕接收等关键节点
- **插件生命周期管理**: 加载→初始化→激活→停用以→卸载，支持热重载

### 1.3.10 部署与构建

#### 1.3.10.1 构建流程
- TypeScript编译
- 资源打包
- 代码压缩和优化

#### 1.3.10.2 自动更新
- 增量更新机制
- 更新检测和通知
- 回滚策略

#### 1.3.10.3 版本管理
- 语义化版本控制
- 版本兼容性保证
- 版本发布流程



### 1.2 前端技术架构

#### 1.2.1 总体架构
ACFUN直播工具箱前端采用组件化、模块化架构设计,基于Vue+TypeScript+TDesign实现,遵循MVVM模式

#### 1.2.2 组件设计
- 基础组件:按钮输入框、选择器等高复用组件
- 功能组件:弹幕组件、直播数据卡片等特殊业务组件
- 页面组件:登录页、仪表盘等完整页面

### 1.2.3 功能模块实现方案

#### 1.2.3.1 主客户端核心模块

##### 仪表盘模块
-数据获取:通过userProfile接口获取用户信息
-状态管理:使用状态管理工存储用户信和核心数据
- 动态内容渲染：根据数据类型动态渲染不同内容块

##### 用户认证模块
-登录流程:生成登录二维码、监听扫描状态、验证登录信息、存储用户会话
-状态管理:使用状态管理工具管理登录状态、浏览器存储持久化
-权限控制:路由守卫、组件级别权限控制

##### 直播管理模块
房间管理:房间信CRUD操作、封面上传裁剪分区选择
-推流管理:RTMP地址直播码管理OB连接状态监控
-信息展:实时观众数、点赞数、香蕉数等统计数据

#### 1.2.3.2 小程序系统模块

##### 1.2.3.2.1 小程序开发者支持
- 提供完整的API文档和开发指南
- 开发调试工具集成
- 小程序打包和发布流程支持
- 版本管理和兼容性测试工具

##### 1.2.3.2.2 小程序管理
-小程序加载机制:动态加载远程组件、权限验证、生命周期管理
-小程序状态监控:实时监控运行状态、资源使用情况、性能指标
-小程序权限管理:细粒度权限控制、API访问限制、数据隔离

##### 1.2.3.2.3 小程序市场
小程序商店:分类展示、搜索功能、评分系统
安装更新:一键安装、自动更新、版本回退
- 安全性检测:代码扫描、权限审计、运行时监控

### 1.2.4 核心功能实现细节

#### 1.2.4.1 状态管理设计
使用状态管理工具Pinia进行全局状态管理
模块化设计分离不同功能域的状态
派生计算状态
处理异步操作
修改状态的规范方法

#### 1.2.4.2 网络请求设计
封装HTTP请求
实现EventSource连接管理用于处理单向数据流
请求拦截器添加认证信息
响应拦截器处理错误
请求重试机制

#### 1.2.4.3 组件通信机制
父子组件通过props事件通信
跨组件通信使用事件总线
全局状态通过状态管理工具共享
小程序与主应用通过定制事件通信

#### 1.2.4.4 性能优化策略
组件懒加载
图片懒加载和压缩
虚拟列表处理大数据渲染
防抖节流处理频繁操作
缓存策略减少重复请求

### 1.3 部署与构建

#### 1.3.1 构建流程
-TypeScript编译
-资源打包
-代码压缩和优化

#### 1.3.2 自动更新
-增量更新机制
-更新检测和通知
-回滚策略

#### 1.3.3 版本管理
-语义化版本控制
-版本兼容性保证
-版本发布流程


## 二、用户核心诉求分析

- **新手主播**：需要简单易用的开播流程，基础弹幕管理功能
- **成长型主播**: 需要数据分析功能，观众互动工具，直播效果优化建议
- **资深主播**: 需要高度自定义能力，多平台整合，专业级数据洞察
  
### 2.2 用户痛点与需求
- **开播准备复杂**: 希望简化开播流程，一键完成房间设置和推流配置
- **互动管理困难**: 需要高效弹幕过滤工具，自定义互动规则
- **功能扩展受限**: 需要灵活添加新功能，无需等待整体版本更新
- **数据决策缺失**: 需要直观的直播数据展示，观众行为分析
- **多平台管理繁琐**: 希望一站式管理多个直播平台和账号
## 三、UI设计需求
### 3.1 UI整体架构
ACFUN直播工具箱采用分层架构设计，整体风格为深色主题，符合直播工具的专业感和夜间使用场景需求。UI设计遵循"主客户端聚焦核心，小程序扩展功能"的架构理念，通过清晰的视觉层次和交互设计区分核心功能与扩展功能。

#### 3.1.1 布局层次
- **应用层**：基于跨平台应用框架，包含主客户端和小程序容器
- **框架层**：自定义的布局组件（内容框架、行框架等）和小程序运行时环境
- **组件层**：核心功能组件、UI组件和小程序公共组件
- **页面层**：核心功能页面和小程序页面

#### 3.1.2 技术栈
- 前端框架：vue + tdesign
- 小程序容器技术：wujie 微前端框架

### 3.2 主要页面布局
#### 3.2.1 登录页面
- **布局结构**：顶部导航栏(含应用logo)、中部登录区域(二维码登录模块和欢迎界面)、底部区域(版本号和版权信息)、右下角背景图
- **设计特点**：简洁登录流程、响应式布局、实时登录状态反馈
- **核心控件**：二维码登录按钮、同意条款复选框、免责声明弹窗

#### 3.2.2 仪表盘页面
- **布局结构**：全屏内容框架(列布局)、欢迎区域(顶部行框架)、动态内容块(多行框架)、左侧底部半透明背景动画图
- **设计特点**：信息展示为主、背景图片增强视觉效果、内容层次清晰

#### 3.2.3 房间管理页面
- **布局结构**：封面设置区域、房间信息区域、弹幕流链接区域、OBS同步设置区域、RTMP设置区域、推流状态区域、下播按钮区域
- **核心控件**：图片上传控件(支持裁剪)、房间标题输入框、直播分区级联选择器、OBS同步开关、推流状态指示器

#### 3.2.4 小程序管理中心
- **布局结构**：顶部导航栏(搜索框和操作按钮)、分类标签栏、卡片式小程序列表、底部状态栏
- **设计特点**：卡片式设计(含图标/名称/描述/评分/状态)、实时状态展示、快速操作按钮、拖拽排序功能

#### 3.2.5 其他关键页面
- **错误页面**：全屏居中容器、错误图标(282x218px)、友好错误提示文本、返回按钮
- **通用设置页面**：模块化设置区域(使用说明/系统/推流工具路径/端口设置/配置文件/缓存/账号缓存)
- **推流监控页面**：左侧房间信息区域(封面/标题/分类/时长)、右侧数据统计区域(观众数/点赞数/香蕉数/AC币)

### 3.3 UI设计风格与特点
#### 3.3.1 颜色方案
- 主色调：蓝色系（#1890ff）
- 背景色：深色背景（黑色或深灰色）
- 文本色：白色和浅灰色（提高可读性）
- 状态色：绿色（在线/成功）、红色（离线/失败）

#### 3.3.2 排版规范
- 字体：系统默认字体，标题加粗
- 字体大小层次：
  - 标题：较大字号（18px+）
  - 正文：中等字号（14px-16px）
  - 辅助文字：较小字号（12px-13px）

#### 3.3.5 组件尺寸规范
- 按钮尺寸：默认40px高度，紧凑型32px，大型48px
- 输入框：统一高度40px，边框半径4px
- 卡片组件：默认阴影2px，悬停时阴影4px
- 图标尺寸：16x16px（紧凑）、24x24px（默认）、32x32px（强调）

#### 3.3.3 组件风格
- 圆角设计：轻微圆角（4px）
- 阴影效果：适度阴影增强层次感
- 悬停效果：按钮和可交互元素有明显的悬停状态变化
- 一致性：相同类型的组件保持统一的设计风格

#### 3.3.4 交互体验
- 表单验证实时反馈
- 操作成功/失败提示
- 加载状态显示
- 平滑过渡动画

### 3.4 响应式设计
- 适配不同屏幕分辨率（1080p、720p、480p等）
- 使用弹性布局实现弹性空间分配
- 部分页面元素根据屏幕尺寸自动调整大小或隐藏

### 3.5 组件库与自定义组件
#### 3.5.1 第三方组件库使用
主要使用第三方组件库，核心组件包括：
- 基础组件：按钮、输入框、开关、勾选框
- 表单组件：表单、选择器、级联选择器、滑块
- 导航组件：选项卡、菜单
- 消息组件：消息提示、对话框、通知
- 布局组件：容器、行、列

#### 3.5.2 自定义组件
项目中开发了多个自定义组件以满足特定需求：
- 弹幕流组件
- 房间列表组件
- 超级聊组件
- 规则引擎组件
- 状态条组件

### 3.6 设计规范
#### 3.6.1 布局规范
- 统一使用内容框架和行框架构建页面结构
- 保持一致的间距和边距（通常为8px、16px）
- 功能相关的元素放在同一区域

#### 3.6.2 颜色规范
- 遵循品牌色体系
- 确保文本与背景的对比度符合无障碍标准
- 状态色使用统一（成功绿色、失败红色、警告黄色）

#### 3.6.3 图标规范
- 使用统一的图标库
- 保持图标风格一致
- 图标大小适中，确保可读性

#### 3.6.4 命名规范
- 组件名称使用帕斯卡命名法
- CSS类名使用短横线命名法
- 文件名称与组件名称保持一致

### 3.7 性能优化
- 组件懒加载
- 图片优化（压缩、懒加载）
- 样式按需加载
- 减少不必要的重绘和回流

### 3.8 未来优化方向
1. 增加更多主题选项（明亮主题、深色主题切换）
2. 进一步优化响应式设计，适配更多设备
3. 提升组件动画流畅度
4. 增强无障碍设计
5. 优化大流量场景下的UI表现（如高并发弹幕）

## 4. 功能模块划分
### 4.1 主客户端核心模块
#### 4.1.1 仪表盘模块
- **欢迎信息展示**
  - **操作逻辑流程**：用户登录成功后自动显示，根据当前时间和用户昵称动态生成个性化欢迎语
  - **交互元素定义**：页面顶部居中显示的文本区域，包含用户头像和昵称
  - **界面呈现效果**：大字号欢迎文本，配合用户头像，背景为半透明渐变效果
  - **用户操作反馈**：鼠标悬停时无特殊反馈，内容在用户重新登录或刷新页面时更新

- **核心数据概览**
  - **操作逻辑流程**：页面加载时自动从后端获取最新直播数据，每5秒刷新一次
  - **交互元素定义**：数据卡片组件，包含观众数、礼物数、弹幕数等关键指标的文本和图标
  - **界面呈现效果**：多列网格布局的数据卡片，使用数字动画效果展示数据变化
  - **用户操作反馈**：数据更新时显示微妙的数字变化动画，点击卡片可跳转到对应数据分析详情页

- **背景视觉效果**
  - **操作逻辑流程**：页面加载时自动启动，无需用户交互
  - **交互元素定义**：页面左侧底部固定区域的半透明动画图
  - **界面呈现效果**：低饱和度的动态背景图案，不影响前景内容的可读性
  - **用户操作反馈**：无直接用户操作，动画持续循环播放

#### 4.1.2 用户认证模块
- **登录系统**
  - **操作逻辑流程**：
    1. 应用启动时显示登录页面
    2. 默认展示二维码登录方式
    3. 用户可切换至账号密码登录或游客模式
    4. 二维码登录：显示二维码 → 用户扫描 → 手机确认 → 登录成功
    5. 账号密码登录：输入用户名密码 → 点击登录 → 验证成功 → 登录成功
  - **交互元素定义**：
    - 二维码显示区域：居中显示动态刷新的登录二维码
    - 账号输入框：支持文本输入，带清空按钮
    - 密码输入框：支持密码输入，带显示/隐藏切换功能
    - 登录按钮：主操作按钮，点击后触发登录请求
    - 模式切换选项卡：用于在不同登录方式间切换
    - 游客模式入口：独立的链接或按钮
  - **界面呈现效果**：简洁的单页布局，中央聚焦登录功能，背景为品牌色渐变
  - **用户操作反馈**：
    - 二维码有效期倒计时显示
    - 输入框焦点状态提示
    - 登录过程中显示加载动画
    - 登录失败时显示明确的错误提示

- **状态管理**
  - **操作逻辑流程**：
    1. 登录成功后生成并存储会话令牌
    2. 应用启动时自动检测会话有效性
    3. 支持用户选择自动登录选项
    4. 登出时清除会话数据
  - **交互元素定义**：
    - 自动登录复选框：位于登录表单下方
    - 登出按钮：位于用户头像下拉菜单中
  - **界面呈现效果**：无直接界面呈现，为后台功能
  - **用户操作反馈**：
    - 自动登录成功时直接进入主界面
    - 会话过期时自动跳转至登录页面并显示提示

- **权限控制**
  - **操作逻辑流程**：
    1. 基于用户角色分配不同权限
    2. 所有接口请求自动附加权限验证
    3. 功能访问前进行权限检查
  - **交互元素定义**：无直接用户可见的交互元素
  - **界面呈现效果**：无权限功能在界面上隐藏或置灰
  - **用户操作反馈**：尝试访问无权限功能时显示权限不足提示

#### 4.1.3 直播管理模块
- **房间管理**
  - **操作逻辑流程**：
    1. 进入房间管理页面
    2. 配置房间封面（上传图片）、标题（文本输入）、分区（下拉选择）
    3. 设置观众剪辑权限（开关）
    4. 管理管理员列表（添加/删除）
    5. 管理观众列表（禁言/踢出）
    6. 点击保存按钮提交修改
  - **交互元素定义**：
    - 封面图片上传区域：支持拖拽上传和点击选择文件
    - 标题输入框：多行文本输入，带字数限制提示
    - 分区选择下拉框：支持搜索的分类选择组件
    - 权限开关：布尔值切换组件
    - 用户列表：表格形式展示，带操作按钮列
    - 添加/删除/保存按钮：标准操作按钮
  - **界面呈现效果**：表单布局，左侧为基础信息设置，右侧为权限管理
  - **用户操作反馈**：
    - 保存成功/失败提示
    - 图片上传进度条
    - 操作按钮点击反馈

- **推流管理**
  - **操作逻辑流程**：
    1. 进入推流管理页面
    2. 系统自动生成RTMP服务器信息和直播码
    3. 用户可选择OBS同步推流（自动配置OBS）或手动配置
    4. 点击"开始推流"按钮启动直播
    5. 推流过程中实时显示推流状态和数据
    6. 点击"结束直播"按钮停止直播
  - **交互元素定义**：
    - RTMP信息展示区：文本信息，带复制按钮
    - OBS同步开关：布尔值切换组件
    - 开始/结束推流按钮：状态切换按钮
    - 推流状态指示器：颜色变化的状态灯
    - 推流数据仪表盘：显示码率、延迟等关键指标
  - **界面呈现效果**：顶部为操作按钮区，中间为状态和信息展示区，底部为数据图表
  - **用户操作反馈**：
    - 按钮状态变化（可用/禁用）
    - 推流状态切换动画
    - 数据实时更新动画
    - 异常情况告警提示

- **直播信息展示**
  - **操作逻辑流程**：直播开始后自动加载并实时更新
  - **交互元素定义**：
    - 欢迎面板：位于直播界面顶部的动态文本
    - 直播状态统计：实时更新的数字和图表
  - **界面呈现效果**：覆盖在直播画面上方的半透明信息层，不影响直播观看
  - **用户操作反馈**：数据更新时的动画效果

#### 4.1.4 数据分析模块
- **实时统计数据**
  - **操作逻辑流程**：直播开始后自动收集数据，每3秒刷新一次
  - **交互元素定义**：
    - 观看人数计数器：大字号数字显示
    - 礼物收入指示器：动态更新的金额显示
    - 弹幕数量统计：滚动更新的数字
  - **界面呈现效果**：位于主界面顶部的关键数据条，使用对比鲜明的颜色和字体
  - **用户操作反馈**：数据增长时的动画效果

- **观众行为分析**
  - **操作逻辑流程**：
    1. 进入数据分析详情页
    2. 选择时间范围和分析维度
    3. 系统生成观众来源、观看时长、互动行为等分析图表
  - **交互元素定义**：
    - 时间范围选择器：日期区间选择组件
    - 分析维度切换选项卡：用于在不同分析维度间切换
    - 数据图表：柱状图、折线图、饼图等可视化组件
  - **界面呈现效果**：多区域图表布局，支持数据筛选和排序
  - **用户操作反馈**：
    - 图表加载动画
    - 数据筛选时的实时更新

- **礼物数据统计**
  - **操作逻辑流程**：同观众行为分析
  - **交互元素定义**：
    - 收入统计图表：显示礼物总收入趋势
    - 用户排行榜：表格形式展示贡献榜
    - 礼物类型分布图：饼图展示不同礼物类型占比
  - **界面呈现效果**：多图表组合布局，突出显示高价值数据
  - **用户操作反馈**：同观众行为分析

- **数据报表**
  - **操作逻辑流程**：
    1. 直播结束后自动生成完播复盘报告
    2. 用户可查看历史数据分析和趋势对比
    3. 支持数据导出功能
  - **交互元素定义**：
    - 报告列表：表格展示历史报告
    - 导出按钮：标准操作按钮
    - 详情查看链接：点击进入报告详情
  - **界面呈现效果**：简洁的报告列表页，点击后进入详细报告视图
  - **用户操作反馈**：
    - 报告生成成功提示
    - 导出进度和完成提示

#### 4.1.5 小本本功能
  - **操作逻辑流程**：
    1. 进入小本本功能页面
    2. 可添加、编辑、删除房管和黑名单用户
    3. 支持搜索和筛选功能
  - **交互元素定义**：
    - 用户列表：表格形式展示房管和黑名单用户
    - 添加/编辑/删除按钮：标准操作按钮
    - 搜索框：支持用户名搜索
  - **界面呈现效果**：简洁的表格布局，支持分页和排序
  - **用户操作反馈**：
    - 操作成功/失败提示
    - 列表更新动画

#### 4.1.6 系统设置模块
- **通用设置**
  - **操作逻辑流程**：
    1. 进入系统设置页面
    2. 在通用设置区域修改各项配置
    3. 点击保存按钮应用更改
  - **交互元素定义**：
    - 界面主题选择器：下拉菜单或单选按钮组
    - 语言选择器：下拉菜单
    - 路径输入框：支持手动输入和文件夹选择
    - 配置备份/恢复按钮：标准操作按钮
    - 通知设置开关：布尔值切换组件
  - **界面呈现效果**：分类清晰的表单布局，每类设置有明确的标题
  - **用户操作反馈**：
    - 保存成功/失败提示
    - 配置更改后的即时预览（如主题切换）

- **网络设置**
  - **操作逻辑流程**：
    1. 在系统设置页面的网络设置区域修改配置
    2. 可配置后端端口，查看网络状态和日志
    3. 系统自动检测端口冲突
  - **交互元素定义**：
    - 端口输入框：数字输入，带范围限制
    - 状态显示区：文本显示当前网络状态
    - 日志查看按钮：点击打开日志查看器
  - **界面呈现效果**：简洁的表单布局，突出显示当前状态信息
  - **用户操作反馈**：
    - 端口冲突时的警告提示
    - 网络状态变化的实时更新

- **快捷键设置**
  - **操作逻辑流程**：
    1. 在系统设置页面的快捷键设置区域配置
    2. 点击输入框后按下想要设置的快捷键组合
    3. 支持恢复默认快捷键
  - **交互元素定义**：
    - 快捷键输入框：特殊输入组件，支持键盘事件捕获
    - 恢复默认按钮：标准操作按钮
  - **界面呈现效果**：列表形式展示各项功能及其快捷键
  - **用户操作反馈**：
    - 快捷键冲突时的提示
    - 设置成功的确认信息

- **服务器配置**
  - **操作逻辑流程**：系统根据当前环境自动选择服务器配置，一般无需用户手动修改
  - **交互元素定义**：
    - 开发环境服务器地址：只读文本显示
    - 生产环境服务器地址：只读文本显示
  - **界面呈现效果**：简洁的信息展示，突出显示当前使用的服务器
  - **用户操作反馈**：无特殊用户操作反馈

- **网络检测**
  - **操作逻辑流程**：
    1. 用户点击网络检测按钮
    2. 系统执行网络连接测试
    3. 显示检测结果
  - **交互元素定义**：
    - 网络检测按钮：标准操作按钮
    - 检测结果显示区：文本和图标展示连接状态
  - **界面呈现效果**：位于网络设置区域的独立功能块
  - **用户操作反馈**：
    - 检测过程中的加载动画
    - 检测结果的颜色编码提示（成功/失败）

- **界面主题**
  - **操作逻辑流程**：
    1. 在系统设置的通用设置中选择主题
    2. 点击切换按钮或选择器应用新主题
  - **交互元素定义**：
    - 主题选择器：下拉菜单或卡片选择组件
    - 明暗主题切换开关：布尔值切换组件
  - **界面呈现效果**：主题选择预览区域，实时展示主题效果
  - **用户操作反馈**：主题切换时的平滑过渡动画

- **语言设置**
  - **操作逻辑流程**：
    1. 在系统设置的通用设置中选择语言
    2. 点击应用按钮切换语言
    3. 可能需要重启应用才能完全生效
  - **交互元素定义**：
    - 语言选择器：下拉菜单
    - 应用按钮：标准操作按钮
  - **界面呈现效果**：语言列表，显示当前选中语言
  - **用户操作反馈**：
    - 语言切换成功提示
    - 重启应用提示（如需）

- **字体设置**
  - **操作逻辑流程**：
    1. 在系统设置的通用设置中调整字体
    2. 选择字体类型和大小
    3. 点击应用按钮保存更改
  - **交互元素定义**：
    - 字体类型选择器：下拉菜单
    - 字体大小调整滑块：范围选择组件
    - 应用按钮：标准操作按钮
  - **界面呈现效果**：字体预览区域，实时展示字体变化
  - **用户操作反馈**：字体调整时的实时预览更新

- **通知设置**
  - **操作逻辑流程**：
    1. 在系统设置的通用设置中配置通知
    2. 开启/关闭各类通知
    3. 调整通知频率
  - **交互元素定义**：
    - 通知类型开关：布尔值切换组件组
    - 频率调整滑块：范围选择组件
  - **界面呈现效果**：分类清晰的通知设置列表
  - **用户操作反馈**：设置更改后的即时保存提示

#### 4.1.7 错误处理模块
- **错误页面展示**
  - **操作逻辑流程**：系统遇到错误时自动跳转至错误页面
  - **交互元素定义**：
    - 错误图标：直观的错误类型图标
    - 错误标题：简洁的错误类型描述
    - 错误详情：可选展开/收起的详细错误信息
  - **界面呈现效果**：居中对齐的错误信息展示，背景为轻微的错误主题色
  - **用户操作反馈**：无特殊用户操作反馈

- **错误信息反馈**
  - **操作逻辑流程**：错误发生时自动收集和展示错误信息
  - **交互元素定义**：
    - 错误描述文本：清晰的错误原因说明
    - 导航建议：提供可能的解决方案或下一步操作建议
  - **界面呈现效果**：错误页面的核心内容区，使用易读的字体和颜色
  - **用户操作反馈**：无特殊用户操作反馈

- **返回机制**
  - **操作逻辑流程**：用户点击返回按钮回到上一页或主界面
  - **交互元素定义**：
    - 返回按钮：标准的返回图标和文本按钮
    - 主页按钮：可选的主页快捷入口
  - **界面呈现效果**：位于错误页面底部或顶部的操作按钮区
  - **用户操作反馈**：
    - 按钮点击反馈
    - 页面跳转过渡动画